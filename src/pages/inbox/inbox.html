<ion-header color="secondary">
  <ion-navbar>
    <button ion-button color="dark"  menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>

    <!-- Icon buttons -->
    <button ion-button color="dark" small float-right icon-only clear (click)='goToInboxSettings()'>
      <ion-icon name="settings"></ion-icon>
    </button>
    <button ion-button color="dark" small float-right icon-only clear (click)='goToInboxFilters()'>
      <ion-icon name="funnel"></ion-icon>
    </button>
    <button ion-button color="dark" small float-right icon-only clear (click)='goToInboxSettings()'>
      <ion-icon name="search"></ion-icon>
    </button>
    <ion-title >Inbox</ion-title>
  </ion-navbar>
</ion-header>



<ion-content class="pageBackground">
  <!-- Searchbar -->
  <ion-searchbar no-padding no-margin
    placeholder="Filter Items with Cancel"
    showCancelButton color="danger"
    (ionInput)="filterItems($event)">
  </ion-searchbar>

  <!-- <ion-item no-padding no-margin class='short'>
    <ion-icon name="search"></ion-icon>
    <ion-input type="text" placeholder="Search" [(ngModel)]='filteredPlatform'></ion-input>
  </ion-item> -->

  <!-- Messages are shown here -->
  <ion-card *ngFor='let message of messages | search:filteredPlatform: "platform": "sender": "text"' no-margin style="width: 100%; margin-top: 8px">
    
    <ion-card-header style="padding: 0px 0px 0px 2px; color: aliceblue" [style.background]= message.color>
      <composer-summary 
        style='font-size: 1.4em'
        [senderName] = message.sender
        [senderType] = message.messageType
      >
      </composer-summary>
    </ion-card-header>
    
    <ion-card-content no-padding>
      <composer-detail
        [image] = 'message.image'
        [senderName] = 'message.sender'
        [messageDate] = 'message.messageDate | date'
      >
      </composer-detail>
      
      <hr style="margin: 0 16px 5px 16px">
      
      <post-content
        [text] = 'message.text' 
      >
      </post-content>
      
    </ion-card-content>

    <!-- All action buttons are here. -->
    <!-- For Facebook -->
    <facebook-message-action-buttons *ngIf='message.messageType === "direct message" && message.platform === "facebook" '></facebook-message-action-buttons>
    <facebook-comment-action-buttons *ngIf='message.messageType === "comment" && message.platform === "facebook" '></facebook-comment-action-buttons>

    <!-- For Twitter -->
    <twitter-dm-action-buttons *ngIf='message.messageType === "direct message" && message.platform === "twitter" '></twitter-dm-action-buttons>
    <twitter-retweet-action-buttons *ngIf='message.messageType === "retweet" && message.platform === "twitter" '></twitter-retweet-action-buttons>
    <twitter-new-follower-action-buttons *ngIf='message.messageType === "new follower" && message.platform === "twitter" '></twitter-new-follower-action-buttons>
  </ion-card>
</ion-content>